[event]
	id=Company_attack_event
	name=attacker hits
	first_time_only=no
	[filter_attack]
		special=engagement
	[/filter_attack]

	{VARIABLE GN_ATTACKING_COMPANY $unit.variables.company}
	{VARIABLE GN_DEFENDING_COMPANY $second_unit.variables.company}

	{STORE_GLOBAL_MAP}
	{STORE_COMPANIES}

	{GENERATE_LOCAL_MAP $x1| $y1| $x2| $y2|}

	{CHANGE_SIDE_TO_LOCAL_MODE $GN_ATTACKING_COMPANY|}
	{CHANGE_SIDE_TO_LOCAL_MODE $GN_DEFENDING_COMPANY|}

	{RESTORE_UNITS_FROM_COMPANY $GN_ATTACKING_COMPANY| $GN_ATTACKER_X| $GN_ATTACKER_Y|}
	{RESTORE_UNITS_FROM_COMPANY $GN_DEFENDING_COMPANY| $GN_DEFENDER_X| $GN_DEFENDER_Y|}

	{SET_LOCAL_MODE}
[/event]

